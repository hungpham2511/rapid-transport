This package implements functionalities for time-optimal path
parameterization for object-transportation.

To simplify a contact, then parametrize a trajectory, run the
following script:
#+BEGIN_SRC sh
  transport.paper simplify-contact -c bigcup_bluenb\
		  -o bluenb -a denso_suction_cup2\
		  -T "[[1, 0, 0, 0], [0, -1, 0, 0], [0, 0, -1, 23.5e-3], [0, 0, 0, 1]]"\
		  -r suctioncup1 -v

  python parametrize_trajectory.py -t suctioncup_traj5a\
	 -c bigskirt_squarewood2_a2e54d1ae4\
	 -o squarewood2 -a denso_suction_cup2\
	 -T "[[1, 0, 0, 0e-3], [0, -1, 0, 0], [0, 0, -1, 23.5e-3], [0, 0, 0, 1]]"\
	 -r suctioncup1 -l topp_fast_2 -v
#+END_SRC

To run a trajectory
#+BEGIN_SRC sh
  python run_trajectory.py -t suctioncup_traj5a_14ca6c4b6c
#+END_SRC

TO start the Denso hardware
#+BEGIN_SRC sh
  roslaunch ftsensorless hardware_interface.launch robot_ip:=192.168.0.11\
	    ftsensor_ip:=192.168.0.12 gripper_ip:=192.168.0.14\
	    has_gripper:=false

 roslaunch ftsensorless controllers.launch load_position_joint_controller:=true

#+END_SRC


* Note on testing

  need to activate environment ros, and run gazebo virtual environment for testing

  #+BEGIN_SRC sh
    # term 1
    workon ros
    roslaunch ftsensorless gazebo_interface.launch robot_urdf:=denso_robotiq_85_gripper_pin  
    # term 2
    workon ros
    roslaunch ftsensorless controllers.launch load_position_joint_controller:=true

    # then, in term 3, test by running
    pytest -v # or -x to 
  #+END_SRC
  
* bigcup w/out skirt with blue notebook experiment
  contact: bigcup_bluenb
  attached to bluenb

  #+BEGIN_SRC sh
    transport.paper simplify-contact -c bigcup_bluenb\
		    -o bluenb -a denso_suction_cup2\
		    -T "[[1, 0, 0, 0], [0, -1, 0, 0], [0, 0, -1, 12.5e-3], [0, 0, 0, 1]]"\
		    -r suctioncup1 -v

    transport.paper simplify-contact -c bigcup_bluenb\
		    -o squarewood2 -a denso_suction_cup2\
		    -T "[[1, 0, 0, 0], [0, -1, 0, 0], [0, 0, -1, 12.5e-3], [0, 0, 0, 1]]"\
		    -r suctioncup1 -v

    python parametrize_trajectory.py -c bigcup_bluenb_1608823082\
	   -o bluenb -a denso_suction_cup2\
	   -T "[[1, 0, 0, 0e-3], [0, -1, 0, 0], [0, 0, -1, 12.5e-3], [0, 0, 0, 1]]"\
	   -t suctioncup_traj5a\
	   -r suctioncup1 -l topp_fast_2  -v

    python run_trajectory.py -t suctioncup_traj5a_57c22f0413

  #+END_SRC
  
* quantitative experiment
  
  the EXPERIMENT to finish.

  #+BEGIN_SRC sh
  transport.paper pick-demo --scene "scenarios/exp1.scenario.yaml" -e 
  #+END_SRC
* robust experiment
  target:
  - 5 object/transform combinations

    See svg file `robust_exp_configurations.svg`

    1. Configuration 1: blue notebook, its long edge is parallel to the suction cup's X-AXIS.

       #+BEGIN_SRC sh
       -o bluenb -a denso_suction_cup2 -T "[[1, 0, 0, 0], [0, -1, 0, 0], [0, 0, -1, 12.5e-3], [0, 0, 0, 1]]" \
       #+END_SRC

    2. Configuration 2: blue notebook, its short edge is parallel to the suction cup's X-AXIS.

       #+BEGIN_SRC sh
       -o bluenb -a denso_suction_cup2 -T "[[0, -1, 0, 0], [-1, 0, 0, 0], [0, 0, -1, 12.5e-3], [0, 0, 0, 1]]" \
       #+END_SRC

    3. Same as configuration 1: the notebook is shifted 2 cm along the suctioncup's X-AXIS

       #+BEGIN_SRC sh
       -o bluenb -a denso_suction_cup2 -T "[[1, 0, 0, 20e-3], [0, -1, 0, 0], [0, 0, -1, 12.5e-3], [0, 0, 0, 1]]" \
       #+END_SRC
    
  - 5 trajectories
  - 3 different strategies
    - nil
    - w_contact
    - w_contact (use -d to scale vel to 1.3 times faster)
    - w_contact_jerk
    - kin_only
    - kin_only (use -d to scale vel to 0.7 times faster)
  - contacs profiles
    bigcup_bluenb_1608823082 (original)

    bigcup_bluenb_f6b66fa04f

    bigcup_bluenb_5db183bed2

    bigcup_bluenb_9d14c4040a (generated with COVER_VERTICES)

    bigcup_bluenb_safe_9d14c4040a (a new set of contact, generated with safe traj)

  object/transform 1: bluenb at perpendicular
  #+BEGIN_SRC sh
    transport.paper robust-experiment -c bigcup_bluenb_1608823082 \
		    -o bluenb -a denso_suction_cup2 -T "[[1, 0, 0, 0], [0, -1, 0, 0], [0, 0, -1, 12.5e-3], [0, 0, 0, 1]]" \
		    -t traj1 \
		    -S nil \
		    -d 1.0 -e -v
  #+END_SRC

  object/transform 1: bluenb at perpendicular
  #+BEGIN_SRC sh
    transport.paper robust-experiment -c bigcup_bluenb_1608823082 \
		    -o bluenb -a denso_suction_cup2 -T "[[0, -1, 0, 0], [-1, 0, 0, 0], [0, 0, -1, 12.5e-3], [0, 0, 0, 1]]" \
		    -t traj1 \
		    -S nil \
		    -d 1.0 -e -v
  #+END_SRC


  Results for configuration 1:

  format for each : Record(F/S)x5-TrajectoryDuration


  | Traj\Algorithm    | nil | kin_only | kin_only_0.8speed | w_contact |   |
  |-------------------+-----+----------+-------------------+-----------+---|
  | suctioncup_traj1  | S   | S        |                   | S         |   |
  | suctioncup_traj2  | F   | S        |                   | S         |   |
  | suctioncup_traj3  | F   | S        |                   | S         |   |
  | suctioncup_traj4  | F   | F        |                   | S         |   |
  | suctioncup_traj5a | S   | F        |                   | S         |   |
  | traj1             | S   | S        |                   | S         |   |
  | traj2             | F   | F        |                   | S         |   |
  | traj3             | F   | F        |                   | F         |   |
  | traj4             |     |          |                   |           |   |
  | traj6             |     |          |                   |           |   |
  | traj7             |     |          |                   |           |   |
  | traj8             |     |          |                   |           |   |
  | traj9             |     |          |                   |           |   |
  | traj10            |     |          |                   |           |   |
